# å©´å„¿æ¥è§¦å±é™©ç‰©å“æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunshansj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://gitee.com/qunmasj/projects)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€ç¤¾ä¼šçš„å‘å±•å’Œç”Ÿæ´»æ°´å¹³çš„æé«˜ï¼Œå®¶åº­ç¯å¢ƒçš„å®‰å…¨æ€§æ„ˆå‘å—åˆ°é‡è§†ã€‚å°¤å…¶æ˜¯åœ¨æœ‰å©´å„¿çš„å®¶åº­ä¸­ï¼Œå©´å„¿çš„å®‰å…¨é—®é¢˜æ›´æ˜¯å®¶é•¿å…³æ³¨çš„ç„¦ç‚¹ã€‚å©´å„¿çš„å¥½å¥‡å¿ƒå’Œæ¢ç´¢æ¬²ä½¿ä»–ä»¬å®¹æ˜“æ¥è§¦åˆ°æ½œåœ¨çš„å±é™©ç‰©å“ï¼Œå¦‚æ’åº§ã€çª—æˆ·ã€é—¨ç­‰ï¼Œè¿™äº›ç‰©å“åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­å¾€å¾€è¢«å¿½è§†ï¼Œä½†å´å¯èƒ½å¯¹å©´å„¿çš„å®‰å…¨æ„æˆä¸¥é‡å¨èƒã€‚å› æ­¤ï¼Œå¼€å‘ä¸€ç§é«˜æ•ˆçš„å©´å„¿æ¥è§¦å±é™©ç‰©å“æ£€æµ‹ç³»ç»Ÿæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚

è¿‘å¹´æ¥ï¼Œè®¡ç®—æœºè§†è§‰æŠ€æœ¯çš„è¿…çŒ›å‘å±•ä¸ºå®‰å…¨ç›‘æµ‹æä¾›äº†æ–°çš„è§£å†³æ–¹æ¡ˆã€‚YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹ä½œä¸ºä¸€ç§å…ˆè¿›çš„ç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œä»¥å…¶é«˜æ•ˆæ€§å’Œå‡†ç¡®æ€§åœ¨å„ç±»åº”ç”¨ä¸­å–å¾—äº†æ˜¾è‘—æˆæ•ˆã€‚YOLOv8ä½œä¸ºè¯¥ç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå…·å¤‡æ›´å¼ºçš„ç‰¹å¾æå–èƒ½åŠ›å’Œæ›´å¿«çš„æ¨ç†é€Ÿåº¦ï¼Œé€‚åˆå®æ—¶ç›‘æµ‹åœºæ™¯ã€‚é€šè¿‡å¯¹YOLOv8è¿›è¡Œæ”¹è¿›ï¼Œç»“åˆç‰¹å®šçš„å©´å„¿æ¥è§¦å±é™©ç‰©å“æ£€æµ‹éœ€æ±‚ï¼Œå¯ä»¥æœ‰æ•ˆæå‡ç³»ç»Ÿçš„æ£€æµ‹ç²¾åº¦å’Œå“åº”é€Ÿåº¦ï¼Œä»è€Œä¸ºå©´å„¿çš„å®‰å…¨æä¾›æ›´ä¸ºå¯é çš„ä¿éšœã€‚

æœ¬ç ”ç©¶æ‰€ä½¿ç”¨çš„æ•°æ®é›†åŒ…å«2035å¼ å›¾åƒï¼Œæ¶µç›–äº†6ä¸ªç±»åˆ«ï¼šå©´å„¿ã€é—¨ã€æ’åº§ã€çª—æˆ·ã€æ¤…å­å’Œæ¡Œå­ã€‚è¿™äº›ç±»åˆ«çš„é€‰æ‹©åŸºäºå¯¹å®¶åº­ç¯å¢ƒä¸­å¸¸è§å±é™©ç‰©å“çš„åˆ†æï¼Œèƒ½å¤Ÿå…¨é¢åæ˜ å©´å„¿å¯èƒ½æ¥è§¦åˆ°çš„é£é™©å› ç´ ã€‚é€šè¿‡å¯¹è¿™äº›å›¾åƒè¿›è¡Œæ ‡æ³¨å’Œè®­ç»ƒï¼Œæ”¹è¿›åçš„YOLOv8æ¨¡å‹å°†èƒ½å¤Ÿå®æ—¶è¯†åˆ«å’Œå®šä½è¿™äº›å±é™©ç‰©å“ï¼Œä»è€Œä¸ºå®¶é•¿æä¾›åŠæ—¶çš„è­¦ç¤ºï¼Œå‡å°‘æ„å¤–äº‹æ•…çš„å‘ç”Ÿã€‚

æ­¤å¤–ï¼Œéšç€æ™ºèƒ½å®¶å±…æŠ€æœ¯çš„æ™®åŠï¼Œå°†å©´å„¿æ¥è§¦å±é™©ç‰©å“æ£€æµ‹ç³»ç»Ÿä¸æ™ºèƒ½å®¶å±…è®¾å¤‡ç›¸ç»“åˆï¼Œèƒ½å¤Ÿå®ç°æ›´ä¸ºæ™ºèƒ½åŒ–çš„å®‰å…¨ç›‘æ§ã€‚ä¾‹å¦‚ï¼Œå½“ç³»ç»Ÿæ£€æµ‹åˆ°å©´å„¿æ¥è§¦åˆ°å±é™©ç‰©å“æ—¶ï¼Œå¯ä»¥é€šè¿‡æ™ºèƒ½éŸ³ç®±å‘å‡ºè­¦æŠ¥ï¼Œæˆ–é€šè¿‡æ‰‹æœºåº”ç”¨å‘å®¶é•¿å‘é€é€šçŸ¥ã€‚è¿™ç§æ™ºèƒ½åŒ–çš„è§£å†³æ–¹æ¡ˆä¸ä»…æå‡äº†å®¶åº­å®‰å…¨ç®¡ç†çš„æ•ˆç‡ï¼Œä¹Ÿä¸ºå®¶é•¿æä¾›äº†æ›´ä¸ºä¾¿æ·çš„ç›‘æ§æ‰‹æ®µã€‚

æœ¬ç ”ç©¶çš„æ„ä¹‰ä¸ä»…åœ¨äºæŠ€æœ¯çš„åˆ›æ–°å’Œåº”ç”¨ï¼Œæ›´åœ¨äºå¯¹å©´å„¿å®‰å…¨é—®é¢˜çš„é‡è§†å’Œè§£å†³ã€‚é€šè¿‡æ„å»ºåŸºäºæ”¹è¿›YOLOv8çš„å©´å„¿æ¥è§¦å±é™©ç‰©å“æ£€æµ‹ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆé™ä½å©´å„¿å› æ¥è§¦å±é™©ç‰©å“è€Œå¯¼è‡´çš„æ„å¤–ä¼¤å®³é£é™©ï¼Œæå‡å®¶åº­çš„å®‰å…¨æ°´å¹³ã€‚åŒæ—¶ï¼Œè¯¥ç³»ç»Ÿçš„ç ”ç©¶æˆæœä¹Ÿä¸ºåç»­ç›¸å…³é¢†åŸŸçš„ç ”ç©¶æä¾›äº†å€Ÿé‰´ï¼Œæ¨åŠ¨äº†è®¡ç®—æœºè§†è§‰æŠ€æœ¯åœ¨å®‰å…¨ç›‘æµ‹é¢†åŸŸçš„åº”ç”¨å‘å±•ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„å©´å„¿æ¥è§¦å±é™©ç‰©å“æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ï¼Œä¸ä»…å…·æœ‰é‡è¦çš„å­¦æœ¯ä»·å€¼ï¼Œä¹Ÿä¸ºå®é™…åº”ç”¨æä¾›äº†åˆ‡å®å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚éšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥å’Œå®Œå–„ï¼Œæœªæ¥è¯¥ç³»ç»Ÿæœ‰æœ›åœ¨æ›´å¹¿æ³›çš„åœºæ™¯ä¸­æ¨å¹¿åº”ç”¨ï¼Œä¸ºæ›´å¤šå®¶åº­çš„å®‰å…¨ä¿é©¾æŠ¤èˆªã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1QxtYeGESi/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 6
names: ['Baby', 'Door', 'Plugs', 'Window', 'chair', 'table']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†åä¸ºâ€œHarmful_Object_Identificationâ€çš„æ•°æ®é›†ï¼Œä»¥è®­ç»ƒå’Œæ”¹è¿›YOLOv8æ¨¡å‹ï¼Œæ—¨åœ¨å¼€å‘ä¸€ä¸ªé«˜æ•ˆçš„å©´å„¿æ¥è§¦å±é™©ç‰©å“æ£€æµ‹ç³»ç»Ÿã€‚è¯¥æ•°æ®é›†ä¸“é—¨è®¾è®¡ç”¨äºè¯†åˆ«ä¸å©´å„¿å®‰å…¨ç›¸å…³çš„ç‰©å“ï¼Œæ¶µç›–äº†å…­ä¸ªä¸»è¦ç±»åˆ«ï¼Œåˆ†åˆ«æ˜¯â€œBabyâ€ï¼ˆå©´å„¿ï¼‰ã€â€œDoorâ€ï¼ˆé—¨ï¼‰ã€â€œPlugsâ€ï¼ˆæ’å¤´ï¼‰ã€â€œWindowâ€ï¼ˆçª—æˆ·ï¼‰ã€â€œchairâ€ï¼ˆæ¤…å­ï¼‰å’Œâ€œtableâ€ï¼ˆæ¡Œå­ï¼‰ã€‚è¿™äº›ç±»åˆ«çš„é€‰æ‹©ä¸ä»…åæ˜ äº†å©´å„¿åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­å¯èƒ½æ¥è§¦åˆ°çš„ç‰©å“ï¼Œè¿˜è€ƒè™‘åˆ°äº†è¿™äº›ç‰©å“æ½œåœ¨çš„å±é™©æ€§ã€‚

æ•°æ®é›†çš„æ ¸å¿ƒåœ¨äºå…¶ä¸°å¯Œçš„æ ‡æ³¨ä¿¡æ¯å’Œå¤šæ ·åŒ–çš„å›¾åƒæ ·æœ¬ã€‚æ¯ä¸ªç±»åˆ«éƒ½åŒ…å«å¤§é‡çš„å›¾åƒï¼Œæ¶µç›–äº†ä¸åŒçš„åœºæ™¯ã€å…‰ç…§æ¡ä»¶å’Œè§’åº¦ï¼Œç¡®ä¿æ¨¡å‹åœ¨å„ç§ç¯å¢ƒä¸‹éƒ½èƒ½ä¿æŒè‰¯å¥½çš„è¯†åˆ«æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨â€œBabyâ€ç±»åˆ«ä¸­ï¼Œæ•°æ®é›†åŒ…å«äº†ä¸åŒå¹´é¾„æ®µçš„å©´å„¿åœ¨å¤šç§å®¶åº­ç¯å¢ƒä¸­çš„å›¾åƒï¼Œè¿™äº›å›¾åƒå±•ç¤ºäº†å©´å„¿ä¸å‘¨å›´ç‰©å“çš„äº’åŠ¨æƒ…å†µï¼Œå¸®åŠ©æ¨¡å‹å­¦ä¹ è¯†åˆ«å©´å„¿çš„å§¿æ€å’Œè¡Œä¸ºç‰¹å¾ã€‚

åœ¨â€œDoorâ€ç±»åˆ«ä¸­ï¼Œæ•°æ®é›†æä¾›äº†å„ç§ç±»å‹çš„é—¨ï¼ŒåŒ…æ‹¬å®¤å†…é—¨å’Œå®¤å¤–é—¨ï¼Œå±•ç¤ºäº†é—¨çš„å¼€å¯ä¸å…³é—­çŠ¶æ€ï¼Œä»¥åŠå©´å„¿å¯èƒ½æ¥è§¦åˆ°é—¨çš„ä¸åŒæƒ…å¢ƒã€‚è¿™ç§å¤šæ ·æ€§ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæœ‰æ•ˆè¯†åˆ«å©´å„¿åœ¨æ¥è¿‘é—¨æ—¶çš„æ½œåœ¨å±é™©ï¼Œå¹¶åŠæ—¶å‘å‡ºè­¦æŠ¥ã€‚

â€œPlugsâ€ç±»åˆ«åˆ™ä¸“æ³¨äºç”µæºæ’å¤´çš„è¯†åˆ«ï¼Œæ•°æ®é›†ä¸­åŒ…å«äº†ä¸åŒç±»å‹çš„æ’å¤´ï¼ŒåŒ…æ‹¬å¢™å£æ’åº§å’Œå»¶é•¿çº¿æ’åº§ã€‚é€šè¿‡è¿™äº›å›¾åƒï¼Œæ¨¡å‹èƒ½å¤Ÿå­¦ä¹ åˆ°æ’å¤´çš„å¤–è§‚ç‰¹å¾åŠå…¶åœ¨å®¶åº­ç¯å¢ƒä¸­çš„å¸¸è§ä½ç½®ï¼Œä»è€Œåœ¨å©´å„¿æ¥è§¦åˆ°æ’å¤´æ—¶å‘å‡ºè­¦ç¤ºã€‚

â€œWindowâ€ç±»åˆ«åŒæ ·è‡³å…³é‡è¦ï¼Œæ•°æ®é›†å±•ç¤ºäº†å„ç§çª—æˆ·çš„æ ·å¼ä¸çŠ¶æ€ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£çª—æˆ·çš„å¼€åˆæƒ…å†µåŠå…¶å¯¹å©´å„¿å®‰å…¨çš„å½±å“ã€‚é€šè¿‡å¯¹çª—æˆ·çš„è¯†åˆ«ï¼Œç³»ç»Ÿèƒ½å¤Ÿæœ‰æ•ˆé¢„è­¦å©´å„¿å¯èƒ½é¢ä¸´çš„è·Œè½é£é™©ã€‚

åœ¨â€œchairâ€å’Œâ€œtableâ€ç±»åˆ«ä¸­ï¼Œæ•°æ®é›†æ¶µç›–äº†å¤šç§æ¬¾å¼å’Œå°ºå¯¸çš„æ¤…å­ä¸æ¡Œå­ï¼Œå±•ç¤ºäº†å©´å„¿åœ¨è¿™äº›å®¶å…·å‘¨å›´çš„æ´»åŠ¨æƒ…å†µã€‚è¿™äº›å›¾åƒä¸ä»…æœ‰åŠ©äºæ¨¡å‹è¯†åˆ«å®¶å…·çš„å­˜åœ¨ï¼Œè¿˜èƒ½åˆ†æå©´å„¿ä¸å®¶å…·çš„ç›¸å¯¹ä½ç½®ï¼Œä»è€Œåˆ¤æ–­æ½œåœ¨çš„ç¢°æ’æˆ–è·Œå€’é£é™©ã€‚

æ€»çš„æ¥è¯´ï¼Œâ€œHarmful_Object_Identificationâ€æ•°æ®é›†é€šè¿‡ä¸°å¯Œçš„ç±»åˆ«å’Œå¤šæ ·åŒ–çš„å›¾åƒæ ·æœ¬ï¼Œä¸ºYOLOv8æ¨¡å‹çš„è®­ç»ƒæä¾›äº†åšå®çš„åŸºç¡€ã€‚æ•°æ®é›†çš„è®¾è®¡å……åˆ†è€ƒè™‘äº†å©´å„¿åœ¨å®¶åº­ç¯å¢ƒä¸­çš„è¡Œä¸ºæ¨¡å¼å’Œå®‰å…¨éšæ‚£ï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿåœ¨å®é™…åº”ç”¨ä¸­æœ‰æ•ˆè¯†åˆ«å±é™©ç‰©å“ï¼Œä¿æŠ¤å©´å„¿çš„å®‰å…¨ã€‚é€šè¿‡å¯¹è¯¥æ•°æ®é›†çš„æ·±å…¥åˆ†æä¸åº”ç”¨ï¼Œæˆ‘ä»¬æœŸæœ›èƒ½å¤Ÿæ˜¾è‘—æå‡å©´å„¿æ¥è§¦å±é™©ç‰©å“æ£€æµ‹ç³»ç»Ÿçš„å‡†ç¡®æ€§å’Œå¯é æ€§ï¼Œä¸ºå®¶åº­æä¾›æ›´å®‰å…¨çš„ç”Ÿæ´»ç¯å¢ƒã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ç®—æ³•æ˜¯Ultralyticså…¬å¸åœ¨2023å¹´æ¨å‡ºçš„ç›®æ ‡æ£€æµ‹é¢†åŸŸçš„æœ€æ–°ç‰ˆæœ¬ï¼Œå®ƒåœ¨å‰å‡ ä»£YOLOæ¨¡å‹çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ˜¾è‘—çš„æ”¹è¿›å’Œä¼˜åŒ–ï¼Œæ—¨åœ¨å®ç°æ›´é«˜çš„æ£€æµ‹ç²¾åº¦å’Œæ›´å¿«çš„æ¨ç†é€Ÿåº¦ã€‚YOLOv8çš„è®¾è®¡ç†å¿µå›´ç»•ç€å¿«é€Ÿã€å‡†ç¡®å’Œæ˜“äºä½¿ç”¨çš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡å±•å¼€ï¼Œæˆä¸ºäº†å›¾åƒåˆ†å‰²å’Œå›¾åƒåˆ†ç±»ç­‰å¤šç§åº”ç”¨åœºæ™¯ä¸­çš„ç†æƒ³é€‰æ‹©ã€‚

YOLOv8çš„ç½‘ç»œç»“æ„ç”±å¤šä¸ªæ¨¡å—ç»„æˆï¼Œå…¶ä¸­è¾“å…¥æ¨¡å—æ˜¯æ•´ä¸ªç®—æ³•çš„èµ·ç‚¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒYOLOv8æ¥æ”¶640x640åƒç´ çš„å›¾åƒä½œä¸ºè¾“å…¥ã€‚ç„¶è€Œï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå›¾åƒçš„é•¿å®½æ¯”å¾€å¾€å„ä¸ç›¸åŒï¼Œå› æ­¤YOLOv8é‡‡ç”¨äº†ä¸€ç§è‡ªé€‚åº”çš„å›¾åƒç¼©æ”¾ç­–ç•¥ã€‚åœ¨è¿›è¡Œæ¨¡å‹æ¨ç†æ—¶ï¼Œç®—æ³•ä¼šå°†å›¾åƒçš„é•¿è¾¹æŒ‰æ¯”ä¾‹ç¼©å°åˆ°æŒ‡å®šå°ºå¯¸ï¼Œå¹¶å¯¹ç¼©å°åçš„çŸ­è¾¹è¿›è¡Œå¡«å……ã€‚è¿™ç§å¤„ç†æ–¹å¼ä¸ä»…æœ‰æ•ˆå‡å°‘äº†ä¿¡æ¯å†—ä½™ï¼Œè¿˜æå‡äº†ç›®æ ‡æ£€æµ‹çš„é€Ÿåº¦ã€‚æ­¤å¤–ï¼Œåœ¨è®­ç»ƒé˜¶æ®µï¼ŒYOLOv8å¼•å…¥äº†Mosaicå›¾åƒå¢å¼ºæŠ€æœ¯ï¼Œé€šè¿‡å°†å››å¼ ä¸åŒçš„å›¾åƒéšæœºç¼©æ”¾å¹¶æ‹¼æ¥æˆä¸€å¼ æ–°å›¾åƒï¼Œå¢å¼ºäº†æ¨¡å‹å¯¹ä¸åŒä½ç½®å’Œå‘¨å›´åƒç´ çš„å­¦ä¹ èƒ½åŠ›ï¼Œä»è€Œæé«˜äº†é¢„æµ‹ç²¾åº¦ã€‚

åœ¨ç½‘ç»œçš„ä¸»å¹²éƒ¨åˆ†ï¼ŒYOLOv8å¯¹C3æ¨¡å—è¿›è¡Œäº†æ›¿æ¢ï¼Œé‡‡ç”¨äº†C2Fæ¨¡å—ï¼Œè¿™ä¸€å˜åŒ–æºäºå¯¹YOLOv7ä¸­ELANæ¨¡å—è®¾è®¡æ€æƒ³çš„å€Ÿé‰´ã€‚C2Fæ¨¡å—é€šè¿‡å¼•å…¥æ›´å¤šçš„è·³å±‚è¿æ¥ï¼Œèƒ½å¤Ÿè·å–æ›´ä¸°å¯Œçš„æ¢¯åº¦æµä¿¡æ¯ï¼ŒåŒæ—¶ä¿æŒäº†æ¨¡å‹çš„è½»é‡åŒ–ç‰¹æ€§ã€‚è¿™ç§ç»“æ„çš„ä¼˜åŒ–ä¸ä»…æå‡äº†ç‰¹å¾æå–çš„èƒ½åŠ›ï¼Œè¿˜åœ¨ä¿è¯è®¡ç®—æ•ˆç‡çš„å‰æä¸‹ï¼Œå¢å¼ºäº†æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚

YOLOv8çš„Neckéƒ¨åˆ†åŒæ ·ç»å†äº†ç»“æ„ä¸Šçš„å˜é©ï¼Œæ‰€æœ‰çš„C3æ¨¡å—è¢«æ›´ä¸ºé«˜æ•ˆçš„C2Fæ¨¡å—æ‰€æ›¿ä»£ï¼Œå¹¶ä¸”åœ¨ä¸Šé‡‡æ ·é˜¶æ®µå»é™¤äº†å¤šä½™çš„å·ç§¯è¿æ¥å±‚ã€‚è¿™ä¸€è®¾è®¡ä½¿å¾—ç‰¹å¾å›¾çš„å¤„ç†æ›´åŠ ç®€æ´é«˜æ•ˆï¼Œè¿›ä¸€æ­¥æå‡äº†æ¨¡å‹çš„æ€§èƒ½ã€‚

åœ¨Headéƒ¨åˆ†ï¼ŒYOLOv8å®ç°äº†ä»Coupled-Headï¼ˆè€¦åˆå¤´ï¼‰åˆ°Decoupled-Headï¼ˆè§£è€¦å¤´ï¼‰çš„è½¬å˜ã€‚ä¼ ç»Ÿçš„è€¦åˆå¤´ç»“æ„å°†æ£€æµ‹å’Œåˆ†ç±»ä»»åŠ¡å…±ç”¨ä¸€ä¸ªå·ç§¯ï¼Œè€ŒYOLOv8åˆ™å°†è¿™ä¸¤ä¸ªä»»åŠ¡åˆ†å¼€å¤„ç†ã€‚é€šè¿‡ä¸¤ä¸ªç‹¬ç«‹çš„åˆ†æ”¯ï¼Œåˆ†åˆ«è¿›è¡Œç±»åˆ«é¢„æµ‹å’Œè¾¹ç•Œæ¡†ä½ç½®çš„å›å½’ï¼ŒYOLOv8èƒ½å¤Ÿæ›´å¥½åœ°èšç„¦äºä¸åŒä»»åŠ¡çš„ç‰¹å¾æå–ï¼Œä»è€Œæé«˜äº†æ¨¡å‹çš„æ”¶æ•›é€Ÿåº¦å’Œé¢„æµ‹ç²¾åº¦ã€‚

æ­¤å¤–ï¼ŒYOLOv8æŠ›å¼ƒäº†ä»¥å¾€çš„Anchor-Basedï¼ˆåŸºäºé”šæ¡†ï¼‰æ£€æµ‹æ€æƒ³ï¼Œè½¬è€Œé‡‡ç”¨Anchor-Freeï¼ˆæ— é”šæ¡†ï¼‰çš„æ–¹æ³•ã€‚è¿™ä¸€åˆ›æ–°ä½¿å¾—ç›®æ ‡æ£€æµ‹çš„è¿‡ç¨‹æ›´åŠ çµæ´»ï¼Œæ¨¡å‹ä¸å†ä¾èµ–äºé¢„è®¾çš„é”šæ¡†è¿›è¡Œä½ç½®å›å½’ï¼Œè€Œæ˜¯å°†ç›®æ ‡æ£€æµ‹é—®é¢˜è½¬åŒ–ä¸ºå…³é”®ç‚¹æ£€æµ‹ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹åœ¨äºï¼Œå‡å°‘äº†è®¡ç®—å¤æ‚åº¦ï¼ŒåŒæ—¶æé«˜äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œä½¿å¾—YOLOv8èƒ½å¤Ÿé€‚åº”ä¸åŒçš„æ•°æ®é›†å’Œç›®æ ‡ç‰©ä½“ã€‚

åœ¨æŸå¤±å‡½æ•°çš„è®¾è®¡ä¸Šï¼ŒYOLOv8å¼•å…¥äº†æ–°çš„ç­–ç•¥ï¼Œé€šè¿‡å˜ç„¦æŸå¤±è®¡ç®—åˆ†ç±»æŸå¤±ï¼Œå¹¶ç»“åˆæ•°æ®å¹³å‡ä¿çœŸåº¦æŸå¤±å’Œå®Œç¾äº¤å¹¶æ¯”æŸå¤±æ¥è®¡ç®—è¾¹ç•Œæ¡†æŸå¤±ã€‚è¿™ç§æ–°çš„æŸå¤±ç­–ç•¥ä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½å¤Ÿæ›´å¿«åœ°èšç„¦äºæ ‡ç­¾é™„è¿‘çš„æ•°å€¼ï¼Œä»è€Œæå‡äº†ç›®æ ‡æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚

YOLOv8åœ¨COCOval2017æ•°æ®é›†ä¸Šçš„è¡¨ç°è¯æ˜äº†å…¶å“è¶Šçš„æ€§èƒ½ã€‚é€šè¿‡ä¸€ç³»åˆ—çš„å®éªŒå’Œå¯¹æ¯”ï¼ŒYOLOv8åœ¨æ£€æµ‹ç²¾åº¦å’Œæ¨ç†é€Ÿåº¦ä¸Šå‡ä¼˜äºå…¶å‰èº«YOLOv5ã€YOLOv6å’ŒYOLOv7ç­‰ç‰ˆæœ¬ã€‚è¿™ä¸€ç³»åˆ—çš„æ”¹è¿›å’Œåˆ›æ–°ä½¿å¾—YOLOv8ä¸ä»…åœ¨ç†è®ºä¸Šå…·æœ‰é‡è¦çš„å­¦æœ¯ä»·å€¼ï¼ŒåŒæ—¶åœ¨å®é™…åº”ç”¨ä¸­ä¹Ÿå±•ç°å‡ºäº†å¹¿æ³›çš„åº”ç”¨æ½œåŠ›ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒYOLOv8ç®—æ³•çš„åŸç†å’Œç»“æ„è®¾è®¡å……åˆ†ä½“ç°äº†ç°ä»£ç›®æ ‡æ£€æµ‹æŠ€æœ¯çš„å‘å±•è¶‹åŠ¿ã€‚é€šè¿‡å¼•å…¥è‡ªé€‚åº”å›¾åƒç¼©æ”¾ã€ä¼˜åŒ–çš„ä¸»å¹²ç½‘ç»œã€è§£è€¦çš„æ£€æµ‹å¤´ä»¥åŠæ— é”šæ¡†çš„æ£€æµ‹ç­–ç•¥ï¼ŒYOLOv8åœ¨ä¿æŒé«˜æ•ˆæ€§çš„åŒæ—¶ï¼Œæå¤§åœ°æå‡äº†ç›®æ ‡æ£€æµ‹çš„å‡†ç¡®æ€§å’Œçµæ´»æ€§ã€‚è¿™äº›ç‰¹æ€§ä½¿å¾—YOLOv8æˆä¸ºäº†å½“å‰ç›®æ ‡æ£€æµ‹é¢†åŸŸä¸­æœ€å…·ç«äº‰åŠ›çš„ç®—æ³•ä¹‹ä¸€ï¼Œä¸ºæœªæ¥çš„ç ”ç©¶å’Œåº”ç”¨æä¾›äº†å¹¿é˜”çš„ç©ºé—´ã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\dvc.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç²¾ç®€å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼Œä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨DVCLiveè¿›è¡Œè®­ç»ƒè¿‡ç¨‹ä¸­çš„æ—¥å¿—è®°å½•å’Œå¯è§†åŒ–ã€‚

```python
# å¯¼å…¥å¿…è¦çš„åº“
from ultralytics.utils import LOGGER, SETTINGS, TESTS_RUNNING, checks
import os
import re
from pathlib import Path

# å°è¯•å¯¼å…¥DVCLiveå¹¶è¿›è¡Œç‰ˆæœ¬æ£€æŸ¥
try:
    assert not TESTS_RUNNING  # ç¡®ä¿ä¸æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒä¸­
    assert SETTINGS['dvc'] is True  # ç¡®ä¿DVCé›†æˆå·²å¯ç”¨
    import dvclive
    assert checks.check_version('dvclive', '2.11.0', verbose=True)

    # DVCLiveæ—¥å¿—å®ä¾‹
    live = None
    _processed_plots = {}  # å­˜å‚¨å·²å¤„ç†çš„å›¾è¡¨
    _training_epoch = False  # æ ‡è®°å½“å‰æ˜¯å¦åœ¨è®­ç»ƒå‘¨æœŸ

except (ImportError, AssertionError, TypeError):
    dvclive = None  # å¦‚æœå¯¼å…¥å¤±è´¥ï¼Œåˆ™å°†dvcliveè®¾ç½®ä¸ºNone

def _log_images(path, prefix=''):
    """è®°å½•æŒ‡å®šè·¯å¾„çš„å›¾åƒï¼Œä½¿ç”¨DVCLiveè¿›è¡Œæ—¥å¿—è®°å½•ã€‚"""
    if live:  # å¦‚æœDVCLiveå®ä¾‹å­˜åœ¨
        name = path.name
        # é€šè¿‡æ‰¹æ¬¡åˆ†ç»„å›¾åƒï¼Œä»¥ä¾¿åœ¨UIä¸­å¯ç”¨æ»‘å—
        m = re.search(r'_batch(\d+)', name)
        if m:
            ni = m[1]
            new_stem = re.sub(r'_batch(\d+)', '_batch', path.stem)
            name = (Path(new_stem) / ni).with_suffix(path.suffix)

        live.log_image(os.path.join(prefix, name), path)  # è®°å½•å›¾åƒ

def on_pretrain_routine_start(trainer):
    """åœ¨é¢„è®­ç»ƒä¾‹ç¨‹å¼€å§‹æ—¶åˆå§‹åŒ–DVCLiveæ—¥å¿—è®°å½•å™¨ã€‚"""
    try:
        global live
        live = dvclive.Live(save_dvc_exp=True, cache_images=True)  # åˆ›å»ºDVCLiveå®ä¾‹
        LOGGER.info("DVCLiveå·²æ£€æµ‹åˆ°ï¼Œè‡ªåŠ¨æ—¥å¿—è®°å½•å·²å¯ç”¨ã€‚")
    except Exception as e:
        LOGGER.warning(f'è­¦å‘Šï¼šDVCLiveå®‰è£…ä½†æœªæ­£ç¡®åˆå§‹åŒ–ï¼Œæœªè®°å½•æ­¤è¿è¡Œã€‚{e}')

def on_train_start(trainer):
    """å¦‚æœDVCLiveæ—¥å¿—è®°å½•å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œåˆ™è®°å½•è®­ç»ƒå‚æ•°ã€‚"""
    if live:
        live.log_params(trainer.args)  # è®°å½•è®­ç»ƒå‚æ•°

def on_fit_epoch_end(trainer):
    """åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è®°å½•è®­ç»ƒæŒ‡æ ‡å’Œæ¨¡å‹ä¿¡æ¯ã€‚"""
    global _training_epoch
    if live and _training_epoch:
        all_metrics = {**trainer.label_loss_items(trainer.tloss, prefix='train'), **trainer.metrics, **trainer.lr}
        for metric, value in all_metrics.items():
            live.log_metric(metric, value)  # è®°å½•æ¯ä¸ªæŒ‡æ ‡

        live.next_step()  # è¿›å…¥ä¸‹ä¸€ä¸ªæ­¥éª¤
        _training_epoch = False  # é‡ç½®è®­ç»ƒå‘¨æœŸæ ‡è®°

def on_train_end(trainer):
    """åœ¨è®­ç»ƒç»“æŸæ—¶è®°å½•æœ€ä½³æŒ‡æ ‡ã€å›¾è¡¨å’Œæ··æ·†çŸ©é˜µã€‚"""
    if live:
        all_metrics = {**trainer.label_loss_items(trainer.tloss, prefix='train'), **trainer.metrics, **trainer.lr}
        for metric, value in all_metrics.items():
            live.log_metric(metric, value, plot=False)  # è®°å½•æœ€ä½³æŒ‡æ ‡

        # è®°å½•æ··æ·†çŸ©é˜µ
        _log_confusion_matrix(trainer.validator)

        live.end()  # ç»“æŸæ—¥å¿—è®°å½•

# å›è°ƒå‡½æ•°å­—å…¸
callbacks = {
    'on_pretrain_routine_start': on_pretrain_routine_start,
    'on_train_start': on_train_start,
    'on_fit_epoch_end': on_fit_epoch_end,
    'on_train_end': on_train_end
} if dvclive else {}
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **å¯¼å…¥éƒ¨åˆ†**ï¼šå¯¼å…¥å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬Ultralyticsçš„å·¥å…·å’ŒDVCLiveã€‚
2. **DVCLiveåˆå§‹åŒ–**ï¼šåœ¨è®­ç»ƒå¼€å§‹æ—¶åˆå§‹åŒ–DVCLiveæ—¥å¿—è®°å½•å™¨ï¼Œå¹¶è¿›è¡Œç‰ˆæœ¬æ£€æŸ¥ã€‚
3. **å›¾åƒè®°å½•**ï¼šå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ç”¨äºè®°å½•å›¾åƒï¼Œæ”¯æŒæŒ‰æ‰¹æ¬¡åˆ†ç»„ä»¥ä¾¿äºå¯è§†åŒ–ã€‚
4. **è®­ç»ƒè¿‡ç¨‹ä¸­çš„å›è°ƒ**ï¼šå®šä¹‰äº†å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨è®­ç»ƒçš„ä¸åŒé˜¶æ®µè®°å½•å‚æ•°ã€æŒ‡æ ‡å’Œæ··æ·†çŸ©é˜µç­‰ä¿¡æ¯ã€‚
5. **å›è°ƒå­—å…¸**ï¼šæ ¹æ®DVCLiveçš„çŠ¶æ€é€‰æ‹©åˆé€‚çš„å›è°ƒå‡½æ•°è¿›è¡Œæ—¥å¿—è®°å½•ã€‚

è¿™æ ·ç²¾ç®€åçš„ä»£ç ä¿ç•™äº†æ ¸å¿ƒåŠŸèƒ½ï¼Œå¹¶æ·»åŠ äº†è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šä»¥ä¾¿ç†è§£ã€‚

è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºYOLOï¼ˆYou Only Look Onceï¼‰æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­çš„å›è°ƒå‡½æ•°å®ç°ï¼Œä¸»è¦ç›®çš„æ˜¯é›†æˆDVCLiveå·¥å…·ä»¥è®°å½•å’Œå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§ä¿¡æ¯ã€‚ä»£ç é¦–å…ˆå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„æ¨¡å—å’Œåº“ï¼Œå¹¶è¿›è¡Œäº†ä¸€äº›åˆæ­¥çš„æ£€æŸ¥ï¼Œç¡®ä¿DVCLiveçš„é›†æˆæ˜¯å¯ç”¨çš„ã€‚

åœ¨ä»£ç ä¸­ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª`live`å˜é‡ç”¨äºå­˜å‚¨DVCLiveçš„å®ä¾‹ï¼Œä»¥åŠä¸€ä¸ªå­—å…¸`_processed_plots`ç”¨äºè®°å½•å·²ç»å¤„ç†è¿‡çš„å›¾åƒã€‚æ¥ç€ï¼Œå®šä¹‰äº†ä¸€äº›ç§æœ‰å‡½æ•°ï¼Œä¾‹å¦‚`_log_images`ã€`_log_plots`å’Œ`_log_confusion_matrix`ï¼Œè¿™äº›å‡½æ•°è´Ÿè´£è®°å½•å›¾åƒã€è®­ç»ƒè¿›åº¦å›¾å’Œæ··æ·†çŸ©é˜µç­‰ä¿¡æ¯ã€‚

`_log_images`å‡½æ•°ä¼šæ ¹æ®ç»™å®šçš„è·¯å¾„å’Œå‰ç¼€è®°å½•å›¾åƒï¼Œæ”¯æŒå°†å›¾åƒæŒ‰æ‰¹æ¬¡åˆ†ç»„ä»¥ä¾¿åœ¨ç”¨æˆ·ç•Œé¢ä¸­æ˜¾ç¤ºæ»‘å—ã€‚`_log_plots`å‡½æ•°åˆ™ä¼šè®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„å›¾åƒï¼Œå¦‚æœè¿™äº›å›¾åƒä¹‹å‰æ²¡æœ‰è¢«å¤„ç†è¿‡ã€‚`_log_confusion_matrix`å‡½æ•°ç”¨äºè®°å½•æ··æ·†çŸ©é˜µï¼Œå¸®åŠ©åˆ†ææ¨¡å‹çš„åˆ†ç±»æ•ˆæœã€‚

æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†ä¸€ç³»åˆ—çš„å›è°ƒå‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¼šåœ¨è®­ç»ƒçš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œ`on_pretrain_routine_start`å‡½æ•°åœ¨é¢„è®­ç»ƒå¼€å§‹æ—¶åˆå§‹åŒ–DVCLiveçš„æ—¥å¿—è®°å½•ï¼›`on_train_start`å‡½æ•°åœ¨è®­ç»ƒå¼€å§‹æ—¶è®°å½•è®­ç»ƒå‚æ•°ï¼›`on_fit_epoch_end`å‡½æ•°åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è®°å½•è®­ç»ƒæŒ‡æ ‡å’Œæ¨¡å‹ä¿¡æ¯ï¼Œå¹¶æ¨è¿›åˆ°ä¸‹ä¸€ä¸ªæ­¥éª¤ï¼›`on_train_end`å‡½æ•°åœ¨è®­ç»ƒç»“æŸæ—¶è®°å½•æœ€ä½³æŒ‡æ ‡ã€å›¾åƒå’Œæ··æ·†çŸ©é˜µã€‚

æœ€åï¼Œä»£ç å°†è¿™äº›å›è°ƒå‡½æ•°å­˜å‚¨åœ¨ä¸€ä¸ªå­—å…¸ä¸­ï¼Œåªæœ‰åœ¨DVCLiveå¯ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šæ‰§è¡Œã€‚è¿™äº›å›è°ƒå‡½æ•°çš„è®¾è®¡ä½¿å¾—åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½å¤Ÿå®æ—¶è®°å½•å’Œå¯è§†åŒ–æ¨¡å‹çš„æ€§èƒ½ï¼Œä¾¿äºå¼€å‘è€…åˆ†æå’Œè°ƒè¯•æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ã€‚æ•´ä½“ä¸Šï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ºYOLOæ¨¡å‹çš„è®­ç»ƒæä¾›äº†ä¸€ä¸ªçµæ´»ä¸”å¼ºå¤§çš„æ—¥å¿—è®°å½•æœºåˆ¶ã€‚

#### 11.2 code\ultralytics\utils\patches.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import time
from pathlib import Path
import cv2
import numpy as np
import torch

# è¯»å–å›¾åƒæ–‡ä»¶çš„å‡½æ•°
def imread(filename: str, flags: int = cv2.IMREAD_COLOR):
    """
    ä»æ–‡ä»¶ä¸­è¯»å–å›¾åƒã€‚

    å‚æ•°:
        filename (str): è¦è¯»å–çš„æ–‡ä»¶è·¯å¾„ã€‚
        flags (int, optional): å›¾åƒè¯»å–æ ‡å¿—ï¼Œé»˜è®¤ä¸º cv2.IMREAD_COLORã€‚

    è¿”å›:
        (np.ndarray): è¯»å–çš„å›¾åƒã€‚
    """
    # ä½¿ç”¨ cv2.imdecode ä»æ–‡ä»¶ä¸­è¯»å–å›¾åƒ
    return cv2.imdecode(np.fromfile(filename, np.uint8), flags)

# å†™å…¥å›¾åƒæ–‡ä»¶çš„å‡½æ•°
def imwrite(filename: str, img: np.ndarray, params=None):
    """
    å°†å›¾åƒå†™å…¥æ–‡ä»¶ã€‚

    å‚æ•°:
        filename (str): è¦å†™å…¥çš„æ–‡ä»¶è·¯å¾„ã€‚
        img (np.ndarray): è¦å†™å…¥çš„å›¾åƒã€‚
        params (list of ints, optional): é¢å¤–å‚æ•°ï¼Œå‚è€ƒ OpenCV æ–‡æ¡£ã€‚

    è¿”å›:
        (bool): å¦‚æœæ–‡ä»¶å†™å…¥æˆåŠŸè¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚
    """
    try:
        # ä½¿ç”¨ cv2.imencode å°†å›¾åƒç¼–ç å¹¶å†™å…¥æ–‡ä»¶
        cv2.imencode(Path(filename).suffix, img, params)[1].tofile(filename)
        return True
    except Exception:
        return False

# æ˜¾ç¤ºå›¾åƒçš„å‡½æ•°
def imshow(winname: str, mat: np.ndarray):
    """
    åœ¨æŒ‡å®šçª—å£ä¸­æ˜¾ç¤ºå›¾åƒã€‚

    å‚æ•°:
        winname (str): çª—å£åç§°ã€‚
        mat (np.ndarray): è¦æ˜¾ç¤ºçš„å›¾åƒã€‚
    """
    # ä½¿ç”¨ OpenCV çš„ imshow å‡½æ•°æ˜¾ç¤ºå›¾åƒ
    cv2.imshow(winname.encode("unicode_escape").decode(), mat)

# ä¿å­˜ PyTorch æ¨¡å‹çš„å‡½æ•°
def torch_save(*args, **kwargs):
    """
    ä½¿ç”¨ dill åºåˆ—åŒ– lambda å‡½æ•°ï¼Œå¹¶åœ¨ä¿å­˜å¤±è´¥æ—¶è¿›è¡Œé‡è¯•ã€‚

    å‚æ•°:
        *args (tuple): ä¼ é€’ç»™ torch.save çš„ä½ç½®å‚æ•°ã€‚
        **kwargs (dict): ä¼ é€’ç»™ torch.save çš„å…³é”®å­—å‚æ•°ã€‚
    """
    try:
        import dill as pickle  # å°è¯•å¯¼å…¥ dill æ¨¡å—
    except ImportError:
        import pickle  # å¦‚æœæ²¡æœ‰ dillï¼Œåˆ™ä½¿ç”¨ pickle

    # å¦‚æœæ²¡æœ‰æŒ‡å®š pickle_moduleï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„ pickle
    if "pickle_module" not in kwargs:
        kwargs["pickle_module"] = pickle

    for i in range(4):  # æœ€å¤šé‡è¯• 3 æ¬¡
        try:
            return torch.save(*args, **kwargs)  # è°ƒç”¨ torch.save ä¿å­˜æ¨¡å‹
        except RuntimeError:  # å¦‚æœä¿å­˜å¤±è´¥
            if i == 3:
                raise  # å¦‚æœæ˜¯æœ€åä¸€æ¬¡é‡è¯•ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸
            time.sleep((2**i) / 2)  # ç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•ï¼Œé‡‡ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥
```

### ä»£ç è¯´æ˜ï¼š
1. **imread**: ä»æŒ‡å®šè·¯å¾„è¯»å–å›¾åƒï¼Œæ”¯æŒå¤šç§å›¾åƒæ ¼å¼ã€‚
2. **imwrite**: å°†å›¾åƒå†™å…¥æŒ‡å®šè·¯å¾„ï¼Œæ”¯æŒè‡ªå®šä¹‰å‚æ•°ã€‚
3. **imshow**: åœ¨çª—å£ä¸­æ˜¾ç¤ºå›¾åƒï¼Œæ”¯æŒ Unicode çª—å£åç§°ã€‚
4. **torch_save**: å°è£… PyTorch çš„ä¿å­˜åŠŸèƒ½ï¼Œå¢åŠ äº†å¯¹ lambda å‡½æ•°çš„æ”¯æŒï¼Œå¹¶åœ¨ä¿å­˜å¤±è´¥æ—¶è¿›è¡Œé‡è¯•ï¼Œå¢å¼ºäº†ä»£ç çš„å¥å£®æ€§ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `patches.py` æ˜¯ç”¨äºå¢å¼ºå’Œæ‰©å±•ç°æœ‰åŠŸèƒ½çš„çŒ´å­è¡¥ä¸ï¼ˆmonkey patchesï¼‰ï¼Œä¸»è¦æ¶‰åŠå›¾åƒå¤„ç†å’ŒPyTorchçš„åŠŸèƒ½ã€‚æ–‡ä»¶å¼€å¤´çš„æ³¨é‡Šè¡¨æ˜è¯¥æ–‡ä»¶å±äºUltralytics YOLOé¡¹ç›®ï¼Œå¹¶éµå¾ªAGPL-3.0è®¸å¯è¯ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬æ—¶é—´å¤„ç†ã€è·¯å¾„æ“ä½œã€OpenCVã€NumPyå’ŒPyTorchã€‚æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†ä¸€äº›å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¸»è¦æ˜¯å¯¹OpenCVå’ŒPyTorchåŠŸèƒ½çš„å°è£…å’Œå¢å¼ºã€‚

åœ¨OpenCVéƒ¨åˆ†ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª `_imshow` å˜é‡ï¼Œç”¨äºé¿å…é€’å½’é”™è¯¯ã€‚æ¥ç€å®ç°äº† `imread` å‡½æ•°ï¼Œè¯¥å‡½æ•°ç”¨äºä»æ–‡ä»¶ä¸­è¯»å–å›¾åƒã€‚å®ƒæ¥å—æ–‡ä»¶åå’Œè¯»å–æ ‡å¿—ä½œä¸ºå‚æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨å½©è‰²è¯»å–æ¨¡å¼ã€‚å‡½æ•°å†…éƒ¨ä½¿ç”¨ `cv2.imdecode` å’Œ `np.fromfile` è¯»å–å›¾åƒå¹¶è¿”å›ä¸ºNumPyæ•°ç»„ã€‚

ç„¶åæ˜¯ `imwrite` å‡½æ•°ï¼Œç”¨äºå°†å›¾åƒå†™å…¥æ–‡ä»¶ã€‚è¯¥å‡½æ•°æ¥å—æ–‡ä»¶åã€å›¾åƒæ•°æ®å’Œå¯é€‰çš„å‚æ•°åˆ—è¡¨ã€‚å®ƒå°è¯•ä½¿ç”¨ `cv2.imencode` å°†å›¾åƒç¼–ç å¹¶å†™å…¥æŒ‡å®šçš„æ–‡ä»¶ï¼ŒæˆåŠŸæ—¶è¿”å›Trueï¼Œå¤±è´¥æ—¶è¿”å›Falseã€‚

æ¥ä¸‹æ¥æ˜¯ `imshow` å‡½æ•°ï¼Œç”¨äºåœ¨æŒ‡å®šçª—å£ä¸­æ˜¾ç¤ºå›¾åƒã€‚å®ƒæ¥å—çª—å£åç§°å’Œå›¾åƒæ•°æ®ä½œä¸ºå‚æ•°ï¼Œå¹¶è°ƒç”¨ `_imshow` å‡½æ•°æ¥æ˜¾ç¤ºå›¾åƒã€‚çª—å£åç§°åœ¨ä¼ é€’å‰ç»è¿‡ç¼–ç å’Œè§£ç ï¼Œä»¥ç¡®ä¿å¤šè¯­è¨€å…¼å®¹æ€§ã€‚

åœ¨PyTorchéƒ¨åˆ†ï¼Œå®šä¹‰äº†ä¸€ä¸ª `_torch_save` å˜é‡ä»¥é¿å…é€’å½’é”™è¯¯ã€‚ç„¶åå®ç°äº† `torch_save` å‡½æ•°ï¼Œè¯¥å‡½æ•°ç”¨äºä¿å­˜æ¨¡å‹æˆ–æ•°æ®ã€‚å®ƒé¦–å…ˆå°è¯•å¯¼å…¥ `dill` æ¨¡å—ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œä»¥å¤„ç†ä¸€äº› `pickle` æ— æ³•åºåˆ—åŒ–çš„æƒ…å†µã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ° `dill`ï¼Œåˆ™ä½¿ç”¨æ ‡å‡†çš„ `pickle`ã€‚å‡½æ•°ä¸­è¿˜æ·»åŠ äº†é‡è¯•æœºåˆ¶ï¼Œæœ€å¤šé‡è¯•ä¸‰æ¬¡ï¼Œä»¥åº”å¯¹å¯èƒ½çš„ä¸´æ—¶é—®é¢˜ï¼Œå¦‚è®¾å¤‡æœªå‡†å¤‡å¥½æˆ–é˜²ç—…æ¯’è½¯ä»¶æ­£åœ¨æ‰«æã€‚æ¯æ¬¡é‡è¯•ä¹‹é—´çš„ç­‰å¾…æ—¶é—´é‡‡ç”¨æŒ‡æ•°å¢é•¿çš„æ–¹å¼ï¼Œä»¥æé«˜æˆåŠŸçš„æ¦‚ç‡ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶é€šè¿‡å°è£…å’Œå¢å¼ºç°æœ‰çš„OpenCVå’ŒPyTorchåŠŸèƒ½ï¼Œæé«˜äº†ä»£ç çš„å¯ç”¨æ€§å’Œå¥å£®æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å›¾åƒå’Œä¿å­˜æ¨¡å‹æ—¶ã€‚

#### 11.3 ui.py

ä»¥ä¸‹æ˜¯ä¿ç•™çš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ streamlit è¿è¡ŒæŒ‡å®šçš„è„šæœ¬
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤
    result = subprocess.run(command, shell=True)
    # æ£€æŸ¥å‘½ä»¤æ‰§è¡Œç»“æœï¼Œå¦‚æœè¿”å›ç ä¸ä¸º0ï¼Œè¡¨ç¤ºå‡ºé”™
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")

# å®ä¾‹åŒ–å¹¶è¿è¡Œåº”ç”¨
if __name__ == "__main__":
    # æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œå¯ä»¥ç›´æ¥æŒ‡å®šè„šæœ¬åï¼Œå‡è®¾åœ¨å½“å‰ç›®å½•ä¸‹

    # è°ƒç”¨å‡½æ•°è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### æ³¨é‡Šè¯´æ˜ï¼š
1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `sys`ï¼šç”¨äºè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
   - `subprocess`ï¼šç”¨äºæ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚

2. **`run_script` å‡½æ•°**ï¼š
   - è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„ Python è„šæœ¬çš„è·¯å¾„ã€‚
   - ä½¿ç”¨ `sys.executable` è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
   - æ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `streamlit` æ¨¡å—è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚
   - ä½¿ç”¨ `subprocess.run` æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶æ£€æŸ¥è¿”å›ç ä»¥åˆ¤æ–­è„šæœ¬æ˜¯å¦æˆåŠŸè¿è¡Œã€‚

3. **ä¸»ç¨‹åºéƒ¨åˆ†**ï¼š
   - ä½¿ç”¨ `if __name__ == "__main__":` ç¡®ä¿è¯¥éƒ¨åˆ†ä»£ç ä»…åœ¨è„šæœ¬ä½œä¸ºä¸»ç¨‹åºè¿è¡Œæ—¶æ‰§è¡Œã€‚
   - æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ï¼ˆè¿™é‡Œå‡è®¾è„šæœ¬åä¸º `web.py`ï¼‰ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶åä¸º `ui.py`ï¼Œä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ã€‚ç¨‹åºé¦–å…ˆå¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ï¼Œä»¥åŠä¸€ä¸ªè‡ªå®šä¹‰çš„æ¨¡å— `QtFusion.path` ä¸­çš„ `abs_path` å‡½æ•°ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œç¨‹åºæ¥æ”¶ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¿™ä¸ªå‚æ•°æ˜¯è¦è¿è¡Œçš„è„šæœ¬çš„è·¯å¾„ã€‚å‡½æ•°é¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ `python_path` å˜é‡ä¸­ã€‚æ¥ç€ï¼Œç¨‹åºæ„å»ºäº†ä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `streamlit` æ¨¡å—æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚è¿™ä¸ªå‘½ä»¤çš„æ ¼å¼æ˜¯ `"{python_path}" -m streamlit run "{script_path}"`ï¼Œå…¶ä¸­ `{python_path}` å’Œ `{script_path}` ä¼šè¢«å®é™…çš„è·¯å¾„æ›¿æ¢ã€‚

éšåï¼Œç¨‹åºä½¿ç”¨ `subprocess.run` æ–¹æ³•æ¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œ`shell=True` å‚æ•°è¡¨ç¤ºå‘½ä»¤å°†åœ¨ä¸€ä¸ªæ–°çš„ shell ä¸­è¿è¡Œã€‚æ‰§è¡Œåï¼Œç¨‹åºæ£€æŸ¥è¿”å›çš„ç»“æœï¼Œå¦‚æœè¿”å›ç ä¸ä¸º 0ï¼Œè¯´æ˜è„šæœ¬è¿è¡Œå‡ºé”™ï¼Œç¨‹åºä¼šæ‰“å°å‡ºâ€œè„šæœ¬è¿è¡Œå‡ºé”™ã€‚â€çš„æç¤ºä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œç¨‹åºé€šè¿‡ `if __name__ == "__main__":` åˆ¤æ–­æ˜¯å¦æ˜¯ç›´æ¥è¿è¡Œè¯¥è„šæœ¬ã€‚å¦‚æœæ˜¯ï¼Œç¨‹åºä¼šè°ƒç”¨ `abs_path` å‡½æ•°æ¥è·å– `web.py` è„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ `run_script` å‡½æ•°ï¼Œä»è€Œå¯åŠ¨è¯¥è„šæœ¬çš„è¿è¡Œã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºçš„ä¸»è¦ç›®çš„æ˜¯æ–¹ä¾¿åœ°åœ¨å½“å‰ Python ç¯å¢ƒä¸­è¿è¡Œä¸€ä¸ªåä¸º `web.py` çš„è„šæœ¬ï¼Œå¹¶å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚

#### 11.4 code\ultralytics\data\build.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import os
import random
import numpy as np
import torch
from torch.utils.data import dataloader

from .dataset import YOLODataset  # å¯¼å…¥YOLOæ•°æ®é›†ç±»
from .utils import PIN_MEMORY  # å¯¼å…¥å†…å­˜å›ºå®šæ ‡å¿—

class InfiniteDataLoader(dataloader.DataLoader):
    """
    æ— é™å¾ªç¯çš„æ•°æ®åŠ è½½å™¨ï¼Œé‡ç”¨å·¥ä½œçº¿ç¨‹ã€‚
    """

    def __init__(self, *args, **kwargs):
        """åˆå§‹åŒ–æ— é™æ•°æ®åŠ è½½å™¨ï¼Œç»§æ‰¿è‡ªDataLoaderã€‚"""
        super().__init__(*args, **kwargs)
        object.__setattr__(self, "batch_sampler", _RepeatSampler(self.batch_sampler))  # ä½¿ç”¨é‡å¤é‡‡æ ·å™¨
        self.iterator = super().__iter__()  # åˆå§‹åŒ–è¿­ä»£å™¨

    def __len__(self):
        """è¿”å›æ‰¹æ¬¡é‡‡æ ·å™¨çš„é•¿åº¦ã€‚"""
        return len(self.batch_sampler.sampler)

    def __iter__(self):
        """åˆ›å»ºä¸€ä¸ªæ— é™é‡å¤çš„é‡‡æ ·å™¨ã€‚"""
        for _ in range(len(self)):
            yield next(self.iterator)  # è¿”å›ä¸‹ä¸€ä¸ªæ ·æœ¬

    def reset(self):
        """
        é‡ç½®è¿­ä»£å™¨ã€‚

        å½“æˆ‘ä»¬æƒ³åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¿®æ”¹æ•°æ®é›†è®¾ç½®æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚
        """
        self.iterator = self._get_iterator()  # é‡æ–°è·å–è¿­ä»£å™¨


class _RepeatSampler:
    """
    æ°¸ä¹…é‡å¤çš„é‡‡æ ·å™¨ã€‚

    å‚æ•°:
        sampler (Dataset.sampler): è¦é‡å¤çš„é‡‡æ ·å™¨ã€‚
    """

    def __init__(self, sampler):
        """åˆå§‹åŒ–ä¸€ä¸ªæ°¸ä¹…é‡å¤ç»™å®šé‡‡æ ·å™¨çš„å¯¹è±¡ã€‚"""
        self.sampler = sampler

    def __iter__(self):
        """è¿­ä»£'é‡‡æ ·å™¨'å¹¶è¿”å›å…¶å†…å®¹ã€‚"""
        while True:
            yield from iter(self.sampler)  # æ— é™è¿­ä»£é‡‡æ ·å™¨


def seed_worker(worker_id):
    """è®¾ç½®æ•°æ®åŠ è½½å™¨å·¥ä½œçº¿ç¨‹çš„éšæœºç§å­ã€‚"""
    worker_seed = torch.initial_seed() % 2**32  # è·å–å·¥ä½œçº¿ç¨‹çš„éšæœºç§å­
    np.random.seed(worker_seed)  # è®¾ç½®numpyéšæœºç§å­
    random.seed(worker_seed)  # è®¾ç½®Pythonéšæœºç§å­


def build_yolo_dataset(cfg, img_path, batch, data, mode="train", rect=False, stride=32):
    """æ„å»ºYOLOæ•°æ®é›†ã€‚"""
    return YOLODataset(
        img_path=img_path,  # å›¾åƒè·¯å¾„
        imgsz=cfg.imgsz,  # å›¾åƒå¤§å°
        batch_size=batch,  # æ‰¹æ¬¡å¤§å°
        augment=mode == "train",  # æ˜¯å¦è¿›è¡Œæ•°æ®å¢å¼º
        hyp=cfg,  # è¶…å‚æ•°é…ç½®
        rect=cfg.rect or rect,  # æ˜¯å¦ä½¿ç”¨çŸ©å½¢æ‰¹æ¬¡
        cache=cfg.cache or None,  # ç¼“å­˜è®¾ç½®
        single_cls=cfg.single_cls or False,  # æ˜¯å¦å•ç±»æ£€æµ‹
        stride=int(stride),  # æ­¥å¹…
        pad=0.0 if mode == "train" else 0.5,  # å¡«å……
        prefix=colorstr(f"{mode}: "),  # æ¨¡å¼å‰ç¼€
        task=cfg.task,  # ä»»åŠ¡ç±»å‹
        classes=cfg.classes,  # ç±»åˆ«
        data=data,  # æ•°æ®é…ç½®
        fraction=cfg.fraction if mode == "train" else 1.0,  # è®­ç»ƒæ—¶çš„æ ·æœ¬æ¯”ä¾‹
    )


def build_dataloader(dataset, batch, workers, shuffle=True, rank=-1):
    """è¿”å›ç”¨äºè®­ç»ƒæˆ–éªŒè¯é›†çš„InfiniteDataLoaderæˆ–DataLoaderã€‚"""
    batch = min(batch, len(dataset))  # ç¡®ä¿æ‰¹æ¬¡å¤§å°ä¸è¶…è¿‡æ•°æ®é›†å¤§å°
    nd = torch.cuda.device_count()  # è·å–CUDAè®¾å¤‡æ•°é‡
    nw = min([os.cpu_count() // max(nd, 1), workers])  # è®¡ç®—å·¥ä½œçº¿ç¨‹æ•°é‡
    sampler = None if rank == -1 else distributed.DistributedSampler(dataset, shuffle=shuffle)  # åˆ†å¸ƒå¼é‡‡æ ·å™¨
    generator = torch.Generator()  # åˆ›å»ºéšæœºæ•°ç”Ÿæˆå™¨
    generator.manual_seed(6148914691236517205 + RANK)  # è®¾ç½®éšæœºç§å­
    return InfiniteDataLoader(
        dataset=dataset,  # æ•°æ®é›†
        batch_size=batch,  # æ‰¹æ¬¡å¤§å°
        shuffle=shuffle and sampler is None,  # æ˜¯å¦æ‰“ä¹±æ•°æ®
        num_workers=nw,  # å·¥ä½œçº¿ç¨‹æ•°é‡
        sampler=sampler,  # é‡‡æ ·å™¨
        pin_memory=PIN_MEMORY,  # æ˜¯å¦å›ºå®šå†…å­˜
        collate_fn=getattr(dataset, "collate_fn", None),  # åˆå¹¶å‡½æ•°
        worker_init_fn=seed_worker,  # å·¥ä½œçº¿ç¨‹åˆå§‹åŒ–å‡½æ•°
        generator=generator,  # éšæœºæ•°ç”Ÿæˆå™¨
    )


def check_source(source):
    """æ£€æŸ¥æºç±»å‹å¹¶è¿”å›ç›¸åº”çš„æ ‡å¿—å€¼ã€‚"""
    webcam, screenshot, from_img, in_memory, tensor = False, False, False, False, False
    if isinstance(source, (str, int, Path)):  # å­—ç¬¦ä¸²ã€æ•´æ•°æˆ–è·¯å¾„ç±»å‹
        source = str(source)
        is_file = Path(source).suffix[1:] in (IMG_FORMATS + VID_FORMATS)  # æ£€æŸ¥æ˜¯å¦ä¸ºæ–‡ä»¶
        is_url = source.lower().startswith(("https://", "http://", "rtsp://", "rtmp://", "tcp://"))  # æ£€æŸ¥æ˜¯å¦ä¸ºURL
        webcam = source.isnumeric() or source.endswith(".streams") or (is_url and not is_file)  # æ£€æŸ¥æ˜¯å¦ä¸ºæ‘„åƒå¤´
        screenshot = source.lower() == "screen"  # æ£€æŸ¥æ˜¯å¦ä¸ºå±å¹•æˆªå›¾
        if is_url and is_file:
            source = check_file(source)  # ä¸‹è½½æ–‡ä»¶
    elif isinstance(source, LOADERS):
        in_memory = True  # å†…å­˜ä¸­çš„æ•°æ®
    elif isinstance(source, (list, tuple)):
        source = autocast_list(source)  # å°†åˆ—è¡¨å…ƒç´ è½¬æ¢ä¸ºPILæˆ–numpyæ•°ç»„
        from_img = True
    elif isinstance(source, (Image.Image, np.ndarray)):
        from_img = True  # æ¥è‡ªå›¾åƒ
    elif isinstance(source, torch.Tensor):
        tensor = True  # æ¥è‡ªå¼ é‡
    else:
        raise TypeError("ä¸æ”¯æŒçš„å›¾åƒç±»å‹ã€‚æ”¯æŒçš„ç±»å‹è¯·å‚è§æ–‡æ¡£ã€‚")

    return source, webcam, screenshot, from_img, in_memory, tensor  # è¿”å›æºå’Œæ ‡å¿—


def load_inference_source(source=None, imgsz=640, vid_stride=1, buffer=False):
    """
    åŠ è½½ç”¨äºç›®æ ‡æ£€æµ‹çš„æ¨ç†æºå¹¶åº”ç”¨å¿…è¦çš„å˜æ¢ã€‚

    å‚æ•°:
        source (str, Path, Tensor, PIL.Image, np.ndarray): è¾“å…¥æºã€‚
        imgsz (int, optional): æ¨ç†å›¾åƒå¤§å°ï¼Œé»˜è®¤ä¸º640ã€‚
        vid_stride (int, optional): è§†é¢‘æºçš„å¸§é—´éš”ï¼Œé»˜è®¤ä¸º1ã€‚
        buffer (bool, optional): æ˜¯å¦ç¼“å†²æµå¸§ï¼Œé»˜è®¤ä¸ºFalseã€‚

    è¿”å›:
        dataset (Dataset): æŒ‡å®šè¾“å…¥æºçš„æ•°æ®é›†å¯¹è±¡ã€‚
    """
    source, webcam, screenshot, from_img, in_memory, tensor = check_source(source)  # æ£€æŸ¥æºç±»å‹
    source_type = source.source_type if in_memory else SourceTypes(webcam, screenshot, from_img, tensor)  # è·å–æºç±»å‹

    # æ•°æ®åŠ è½½å™¨
    if tensor:
        dataset = LoadTensor(source)  # ä»å¼ é‡åŠ è½½æ•°æ®
    elif in_memory:
        dataset = source  # ä»å†…å­˜åŠ è½½æ•°æ®
    elif webcam:
        dataset = LoadStreams(source, imgsz=imgsz, vid_stride=vid_stride, buffer=buffer)  # ä»æ‘„åƒå¤´åŠ è½½æ•°æ®
    elif screenshot:
        dataset = LoadScreenshots(source, imgsz=imgsz)  # ä»å±å¹•æˆªå›¾åŠ è½½æ•°æ®
    elif from_img:
        dataset = LoadPilAndNumpy(source, imgsz=imgsz)  # ä»å›¾åƒåŠ è½½æ•°æ®
    else:
        dataset = LoadImages(source, imgsz=imgsz, vid_stride=vid_stride)  # ä»æ–‡ä»¶åŠ è½½æ•°æ®

    # å°†æºç±»å‹é™„åŠ åˆ°æ•°æ®é›†
    setattr(dataset, "source_type", source_type)

    return dataset  # è¿”å›æ•°æ®é›†å¯¹è±¡
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **InfiniteDataLoader**ï¼šè‡ªå®šä¹‰çš„æ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒæ— é™å¾ªç¯è¯»å–æ•°æ®ï¼Œé€‚åˆè®­ç»ƒè¿‡ç¨‹ä¸­éœ€è¦ä¸æ–­è·å–æ•°æ®çš„åœºæ™¯ã€‚
2. **_RepeatSampler**ï¼šä¸€ä¸ªç®€å•çš„é‡‡æ ·å™¨ï¼Œèƒ½å¤Ÿæ— é™é‡å¤å·²æœ‰çš„é‡‡æ ·å™¨ï¼Œç¡®ä¿æ•°æ®çš„æŒç»­æ€§ã€‚
3. **seed_worker**ï¼šä¸ºæ¯ä¸ªå·¥ä½œçº¿ç¨‹è®¾ç½®éšæœºç§å­ï¼Œç¡®ä¿æ•°æ®åŠ è½½è¿‡ç¨‹ä¸­çš„éšæœºæ€§å¯æ§ã€‚
4. **build_yolo_dataset**ï¼šæ„å»ºYOLOæ•°æ®é›†çš„å‡½æ•°ï¼Œé…ç½®æ•°æ®é›†çš„å„ç§å‚æ•°ã€‚
5. **build_dataloader**ï¼šæ ¹æ®ç»™å®šçš„æ•°æ®é›†å’Œå‚æ•°æ„å»ºæ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒå¤šçº¿ç¨‹å’Œåˆ†å¸ƒå¼è®­ç»ƒã€‚
6. **check_source**ï¼šæ£€æŸ¥è¾“å…¥æºçš„ç±»å‹ï¼Œç¡®å®šå¦‚ä½•åŠ è½½æ•°æ®ã€‚
7. **load_inference_source**ï¼šåŠ è½½æ¨ç†æºï¼Œé€‚é…ä¸åŒç±»å‹çš„æ•°æ®è¾“å…¥ï¼ˆå¦‚å›¾åƒã€è§†é¢‘ã€å¼ é‡ç­‰ï¼‰ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ä¸»è¦ç”¨äºæ„å»ºå’Œç®¡ç†YOLOï¼ˆYou Only Look Onceï¼‰æ¨¡å‹çš„æ•°æ®åŠ è½½å’Œå¤„ç†ã€‚æ–‡ä»¶ä¸­åŒ…å«äº†å¤šä¸ªç±»å’Œå‡½æ•°ï¼Œæ—¨åœ¨æ”¯æŒYOLOæ¨¡å‹çš„è®­ç»ƒå’Œæ¨ç†è¿‡ç¨‹ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿã€éšæœºæ•°ç”Ÿæˆã€è·¯å¾„å¤„ç†ã€NumPyã€PyTorchã€PILï¼ˆPython Imaging Libraryï¼‰ç­‰ã€‚å®ƒè¿˜å¼•å…¥äº†ä¸€äº›ç‰¹å®šäºUltralyticsçš„æ¨¡å—å’Œå·¥å…·ï¼Œä¾‹å¦‚æ•°æ®åŠ è½½å™¨å’Œå®ç”¨ç¨‹åºã€‚

æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ªåä¸º`InfiniteDataLoader`çš„ç±»ï¼Œå®ƒç»§æ‰¿è‡ªPyTorchçš„`DataLoader`ã€‚è¿™ä¸ªç±»çš„ä¸»è¦åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªå¯ä»¥æ— é™å¾ªç¯çš„è¿­ä»£å™¨ï¼Œä»¥ä¾¿åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­é‡å¤ä½¿ç”¨æ•°æ®åŠ è½½çš„å·¥ä½œçº¿ç¨‹ã€‚å®ƒé‡å†™äº†`__len__`å’Œ`__iter__`æ–¹æ³•ï¼Œä»¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æä¾›äº†ä¸€ä¸ª`reset`æ–¹æ³•ï¼Œç”¨äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¿®æ”¹æ•°æ®é›†è®¾ç½®æ—¶é‡ç½®è¿­ä»£å™¨ã€‚

æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†ä¸€ä¸ªåä¸º`_RepeatSampler`çš„ç±»ï¼Œç”¨äºå®ç°ä¸€ä¸ªå¯ä»¥æ— é™é‡å¤çš„é‡‡æ ·å™¨ã€‚è¿™ä¸ªé‡‡æ ·å™¨ä¼šä¸æ–­è¿­ä»£ç»™å®šçš„é‡‡æ ·å™¨ï¼Œç¡®ä¿æ•°æ®åŠ è½½è¿‡ç¨‹ä¸ä¼šä¸­æ–­ã€‚

`seed_worker`å‡½æ•°ç”¨äºè®¾ç½®æ•°æ®åŠ è½½å™¨å·¥ä½œçº¿ç¨‹çš„éšæœºç§å­ï¼Œä»¥ç¡®ä¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­èƒ½å¤Ÿå¾—åˆ°ä¸€è‡´çš„éšæœºæ€§ã€‚

`build_yolo_dataset`å‡½æ•°ç”¨äºæ„å»ºYOLOæ•°æ®é›†ã€‚å®ƒæ¥å—å¤šä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬é…ç½®ã€å›¾åƒè·¯å¾„ã€æ‰¹é‡å¤§å°ç­‰ï¼Œå¹¶è¿”å›ä¸€ä¸ª`YOLODataset`å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å°†ç”¨äºåŠ è½½å’Œå¤„ç†è®­ç»ƒæˆ–éªŒè¯æ•°æ®ã€‚

`build_dataloader`å‡½æ•°ç”¨äºè¿”å›ä¸€ä¸ª`InfiniteDataLoader`æˆ–æ ‡å‡†çš„`DataLoader`ï¼Œæ ¹æ®è¾“å…¥çš„å‚æ•°é…ç½®è¿›è¡Œè®­ç»ƒæˆ–éªŒè¯é›†çš„åŠ è½½ã€‚å®ƒè®¡ç®—CUDAè®¾å¤‡çš„æ•°é‡å’Œå¯ç”¨çš„å·¥ä½œçº¿ç¨‹ï¼Œå¹¶æ ¹æ®åˆ†å¸ƒå¼è®­ç»ƒçš„éœ€è¦é€‰æ‹©åˆé€‚çš„é‡‡æ ·å™¨ã€‚

`check_source`å‡½æ•°ç”¨äºæ£€æŸ¥è¾“å…¥æºçš„ç±»å‹ï¼Œå¹¶è¿”å›ç›¸åº”çš„æ ‡å¿—å€¼ã€‚å®ƒæ”¯æŒå¤šç§è¾“å…¥ç±»å‹ï¼ŒåŒ…æ‹¬æ–‡ä»¶è·¯å¾„ã€URLã€å›¾åƒã€è§†é¢‘æµç­‰ã€‚

æœ€åï¼Œ`load_inference_source`å‡½æ•°ç”¨äºåŠ è½½æ¨ç†æºï¼Œé€‚ç”¨äºç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚å®ƒæ ¹æ®è¾“å…¥æºçš„ç±»å‹åˆ›å»ºç›¸åº”çš„æ•°æ®é›†å¯¹è±¡ï¼Œå¹¶åº”ç”¨å¿…è¦çš„è½¬æ¢ã€‚è¿™äº›è½¬æ¢åŒ…æ‹¬å›¾åƒå¤§å°è°ƒæ•´ã€è§†é¢‘å¸§é—´éš”è®¾ç½®ç­‰ã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºYOLOæ¨¡å‹æä¾›çµæ´»å’Œé«˜æ•ˆçš„æ•°æ®åŠ è½½å’Œå¤„ç†æœºåˆ¶ï¼Œä»¥æ”¯æŒå…¶è®­ç»ƒå’Œæ¨ç†è¿‡ç¨‹ã€‚

#### 11.5 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\hub.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import json
from time import time
from ultralytics.hub.utils import HUB_WEB_ROOT, PREFIX, events
from ultralytics.utils import LOGGER, SETTINGS

def on_fit_epoch_end(trainer):
    """åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶ä¸Šä¼ è®­ç»ƒè¿›åº¦æŒ‡æ ‡ã€‚"""
    session = getattr(trainer, 'hub_session', None)  # è·å–è®­ç»ƒå™¨çš„ä¼šè¯ä¿¡æ¯
    if session:
        # åœ¨éªŒè¯ç»“æŸåä¸Šä¼ æŒ‡æ ‡
        all_plots = {**trainer.label_loss_items(trainer.tloss, prefix='train'), **trainer.metrics}  # æ”¶é›†è®­ç»ƒæŸå¤±å’ŒæŒ‡æ ‡
        if trainer.epoch == 0:
            from ultralytics.utils.torch_utils import model_info_for_loggers
            all_plots = {**all_plots, **model_info_for_loggers(trainer)}  # å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªå‘¨æœŸï¼Œæ·»åŠ æ¨¡å‹ä¿¡æ¯
        session.metrics_queue[trainer.epoch] = json.dumps(all_plots)  # å°†æŒ‡æ ‡è½¬æ¢ä¸ºJSONæ ¼å¼å¹¶å­˜å…¥é˜Ÿåˆ—
        if time() - session.timers['metrics'] > session.rate_limits['metrics']:  # æ£€æŸ¥æ˜¯å¦è¶…è¿‡ä¸Šä¼ é™åˆ¶
            session.upload_metrics()  # ä¸Šä¼ æŒ‡æ ‡
            session.timers['metrics'] = time()  # é‡ç½®è®¡æ—¶å™¨
            session.metrics_queue = {}  # é‡ç½®é˜Ÿåˆ—

def on_model_save(trainer):
    """ä»¥é€Ÿç‡é™åˆ¶çš„æ–¹å¼å°†æ£€æŸ¥ç‚¹ä¿å­˜åˆ°Ultralytics HUBã€‚"""
    session = getattr(trainer, 'hub_session', None)  # è·å–è®­ç»ƒå™¨çš„ä¼šè¯ä¿¡æ¯
    if session:
        # æ ¹æ®é€Ÿç‡é™åˆ¶ä¸Šä¼ æ£€æŸ¥ç‚¹
        is_best = trainer.best_fitness == trainer.fitness  # åˆ¤æ–­å½“å‰æ¨¡å‹æ˜¯å¦æ˜¯æœ€ä½³æ¨¡å‹
        if time() - session.timers['ckpt'] > session.rate_limits['ckpt']:  # æ£€æŸ¥æ˜¯å¦è¶…è¿‡ä¸Šä¼ é™åˆ¶
            LOGGER.info(f'{PREFIX}Uploading checkpoint {HUB_WEB_ROOT}/models/{session.model_id}')  # è®°å½•ä¸Šä¼ ä¿¡æ¯
            session.upload_model(trainer.epoch, trainer.last, is_best)  # ä¸Šä¼ æ¨¡å‹
            session.timers['ckpt'] = time()  # é‡ç½®è®¡æ—¶å™¨

def on_train_end(trainer):
    """åœ¨è®­ç»ƒç»“æŸæ—¶å°†æœ€ç»ˆæ¨¡å‹å’ŒæŒ‡æ ‡ä¸Šä¼ åˆ°Ultralytics HUBã€‚"""
    session = getattr(trainer, 'hub_session', None)  # è·å–è®­ç»ƒå™¨çš„ä¼šè¯ä¿¡æ¯
    if session:
        # ä¸Šä¼ æœ€ç»ˆæ¨¡å‹å’ŒæŒ‡æ ‡
        LOGGER.info(f'{PREFIX}Syncing final model...')  # è®°å½•åŒæ­¥ä¿¡æ¯
        session.upload_model(trainer.epoch, trainer.best, map=trainer.metrics.get('metrics/mAP50-95(B)', 0), final=True)  # ä¸Šä¼ æœ€ç»ˆæ¨¡å‹
        session.alive = False  # åœæ­¢å¿ƒè·³
        LOGGER.info(f'{PREFIX}Done âœ…\n'
                    f'{PREFIX}View model at {HUB_WEB_ROOT}/models/{session.model_id} ğŸš€')  # è®°å½•å®Œæˆä¿¡æ¯

# å®šä¹‰å›è°ƒå‡½æ•°å­—å…¸ï¼Œæ ¹æ®è®¾ç½®å†³å®šæ˜¯å¦å¯ç”¨
callbacks = {
    'on_fit_epoch_end': on_fit_epoch_end,
    'on_model_save': on_model_save,
    'on_train_end': on_train_end
} if SETTINGS['hub'] is True else {}  # éªŒè¯æ˜¯å¦å¯ç”¨
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **on_fit_epoch_end**: è¯¥å‡½æ•°åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œç”¨äºæ”¶é›†å’Œä¸Šä¼ è®­ç»ƒè¿›åº¦æŒ‡æ ‡ã€‚å®ƒä¼šæ£€æŸ¥æ˜¯å¦è¶…è¿‡ä¸Šä¼ é™åˆ¶ï¼Œå¹¶åœ¨æ»¡è¶³æ¡ä»¶æ—¶ä¸Šä¼ æŒ‡æ ‡ã€‚

2. **on_model_save**: è¯¥å‡½æ•°è´Ÿè´£å°†è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¨¡å‹æ£€æŸ¥ç‚¹ä¸Šä¼ åˆ°Ultralytics HUBã€‚å®ƒä¼šåˆ¤æ–­å½“å‰æ¨¡å‹æ˜¯å¦æ˜¯æœ€ä½³æ¨¡å‹ï¼Œå¹¶åœ¨ç¬¦åˆé€Ÿç‡é™åˆ¶çš„æƒ…å†µä¸‹è¿›è¡Œä¸Šä¼ ã€‚

3. **on_train_end**: è¯¥å‡½æ•°åœ¨è®­ç»ƒç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œè´Ÿè´£ä¸Šä¼ æœ€ç»ˆçš„æ¨¡å‹å’Œç›¸å…³æŒ‡æ ‡ã€‚å®ƒä¼šè®°å½•åŒæ­¥è¿‡ç¨‹ï¼Œå¹¶åœ¨å®Œæˆåè¾“å‡ºæ¨¡å‹çš„è®¿é—®é“¾æ¥ã€‚

4. **callbackså­—å…¸**: è¯¥å­—å…¸å®šä¹‰äº†å¯ç”¨çš„å›è°ƒå‡½æ•°ï¼Œåªæœ‰åœ¨è®¾ç½®ä¸­å¯ç”¨hubæ—¶æ‰ä¼šåŒ…å«è¿™äº›å‡½æ•°ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºUltralytics YOLOï¼ˆYou Only Look Onceï¼‰æ¨¡å‹è®­ç»ƒçš„å›è°ƒå‡½æ•°æ¨¡å—ï¼Œä¸»è¦è´Ÿè´£åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸Ultralytics HUBè¿›è¡Œäº¤äº’ï¼ŒåŒ…æ‹¬ä¸Šä¼ æ¨¡å‹å’Œè®­ç»ƒè¿›åº¦çš„æŒ‡æ ‡ã€‚æ–‡ä»¶ä¸­åŒ…å«äº†ä¸€ç³»åˆ—çš„å›è°ƒå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨ç‰¹å®šçš„è®­ç»ƒé˜¶æ®µè¢«è°ƒç”¨ï¼Œä»¥ä¾¿è®°å½•å’Œä¸Šä¼ è®­ç»ƒè¿‡ç¨‹ä¸­çš„é‡è¦ä¿¡æ¯ã€‚

é¦–å…ˆï¼Œ`on_pretrain_routine_end`å‡½æ•°åœ¨é¢„è®­ç»ƒä¾‹ç¨‹ç»“æŸæ—¶è¢«è°ƒç”¨ã€‚å®ƒä¼šæ£€æŸ¥è®­ç»ƒå™¨æ˜¯å¦æœ‰ä¸HUBçš„ä¼šè¯ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è®°å½•æ¨¡å‹çš„é“¾æ¥ï¼Œå¹¶å¯åŠ¨ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œç”¨äºé™åˆ¶ä¸Šä¼ é€Ÿç‡ã€‚

æ¥ä¸‹æ¥ï¼Œ`on_fit_epoch_end`å‡½æ•°åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è¢«è°ƒç”¨ã€‚å®ƒä¼šæ”¶é›†å½“å‰å‘¨æœŸçš„è®­ç»ƒæŸå¤±å’Œå…¶ä»–æŒ‡æ ‡ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯ä¸Šä¼ åˆ°HUBã€‚è¯¥å‡½æ•°è¿˜ä¼šæ£€æŸ¥ä¸Šä¼ çš„æ—¶é—´é—´éš”ï¼Œä»¥ç¡®ä¿ä¸è¶…è¿‡è®¾å®šçš„é€Ÿç‡é™åˆ¶ã€‚

`on_model_save`å‡½æ•°ç”¨äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¿å­˜æ¨¡å‹çš„æ£€æŸ¥ç‚¹ã€‚å®ƒä¼šåœ¨æ»¡è¶³é€Ÿç‡é™åˆ¶çš„æƒ…å†µä¸‹ï¼Œå°†å½“å‰æ¨¡å‹çš„æ£€æŸ¥ç‚¹ä¸Šä¼ åˆ°HUBï¼Œå¹¶è®°å½•ä¸Šä¼ çš„æ—¶é—´ã€‚

`on_train_end`å‡½æ•°åœ¨è®­ç»ƒç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œè´Ÿè´£ä¸Šä¼ æœ€ç»ˆçš„æ¨¡å‹å’Œè®­ç»ƒæŒ‡æ ‡åˆ°HUBã€‚å®ƒä¼šè®°å½•ä¸Šä¼ è¿‡ç¨‹ï¼Œå¹¶åœ¨å®Œæˆååœæ­¢å¿ƒè·³ä¿¡å·ã€‚

æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›å‡½æ•°ç”¨äºåœ¨è®­ç»ƒã€éªŒè¯ã€é¢„æµ‹å’Œå¯¼å‡ºå¼€å§‹æ—¶è¿è¡Œç‰¹å®šçš„äº‹ä»¶ã€‚è¿™äº›å‡½æ•°çš„ä½œç”¨æ˜¯è§¦å‘ä¸è®­ç»ƒç›¸å…³çš„äº‹ä»¶ï¼Œä»¥ä¾¿è¿›è¡Œå¿…è¦çš„å¤„ç†ã€‚

æœ€åï¼Œæ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ª`callbacks`å­—å…¸ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„å›è°ƒå‡½æ•°ï¼Œåªæœ‰åœ¨è®¾ç½®ä¸­å¯ç”¨äº†HUBåŠŸèƒ½æ—¶ï¼Œè¿™äº›å›è°ƒå‡½æ•°æ‰ä¼šè¢«ä½¿ç”¨ã€‚è¿™ä¸ªæ¨¡å—çš„è®¾è®¡ä½¿å¾—åœ¨YOLOæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä¸Ultralytics HUBè¿›è¡Œäº¤äº’ï¼Œä¸Šä¼ æ¨¡å‹å’Œç›‘æ§è®­ç»ƒè¿›åº¦ã€‚

#### 11.6 train.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼Œä¸»è¦é›†ä¸­åœ¨ YOLO æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•°æ®é›†æ„å»ºã€æ•°æ®åŠ è½½ã€é¢„å¤„ç†ã€æ¨¡å‹è®¾ç½®ç­‰å…³é”®åŠŸèƒ½ã€‚

```python
import random
import numpy as np
import torch.nn as nn
from ultralytics.data import build_dataloader, build_yolo_dataset
from ultralytics.engine.trainer import BaseTrainer
from ultralytics.models import yolo
from ultralytics.nn.tasks import DetectionModel
from ultralytics.utils import LOGGER, RANK
from ultralytics.utils.torch_utils import de_parallel, torch_distributed_zero_first

class DetectionTrainer(BaseTrainer):
    """
    æ‰©å±•è‡ª BaseTrainer ç±»ï¼Œç”¨äºåŸºäºæ£€æµ‹æ¨¡å‹çš„è®­ç»ƒã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»º YOLO æ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ä¸º `train` æˆ– `val`ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œé€‚ç”¨äº `rect` æ¨¡å¼ã€‚é»˜è®¤ä¸º Noneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)  # è·å–æ¨¡å‹çš„æœ€å¤§æ­¥å¹…
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æœ‰æ•ˆ
        with torch_distributed_zero_first(rank):  # ä»…åœ¨ DDP ä¸­åˆå§‹åŒ–æ•°æ®é›† *.cache ä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)  # æ„å»ºæ•°æ®é›†
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # æ ¹æ®æ¨¡å¼è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©ä¸€ä¸ªæ–°çš„å°ºå¯¸
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è°ƒæ•´å›¾åƒå¤§å°
            batch["img"] = imgs  # æ›´æ–°æ‰¹æ¬¡ä¸­çš„å›¾åƒ
        return batch

    def set_model_attributes(self):
        """è®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œåç§°ã€‚"""
        self.model.nc = self.data["nc"]  # å°†ç±»åˆ«æ•°é‡é™„åŠ åˆ°æ¨¡å‹
        self.model.names = self.data["names"]  # å°†ç±»åˆ«åç§°é™„åŠ åˆ°æ¨¡å‹
        self.model.args = self.args  # å°†è¶…å‚æ•°é™„åŠ åˆ°æ¨¡å‹

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å› YOLO æ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model
```

### ä»£ç è¯´æ˜ï¼š
1. **æ„å»ºæ•°æ®é›†**ï¼š`build_dataset` æ–¹æ³•æ ¹æ®è¾“å…¥çš„å›¾åƒè·¯å¾„å’Œæ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰æ„å»º YOLO æ•°æ®é›†ï¼Œæ”¯æŒä¸åŒçš„å¢å¼ºæ–¹å¼ã€‚
2. **æ•°æ®åŠ è½½å™¨**ï¼š`get_dataloader` æ–¹æ³•åˆ›å»ºæ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒå¤šçº¿ç¨‹åŠ è½½å’Œæ•°æ®æ‰“ä¹±ï¼Œç¡®ä¿è®­ç»ƒè¿‡ç¨‹çš„é«˜æ•ˆæ€§ã€‚
3. **å›¾åƒé¢„å¤„ç†**ï¼š`preprocess_batch` æ–¹æ³•å¯¹è¾“å…¥çš„å›¾åƒæ‰¹æ¬¡è¿›è¡Œå½’ä¸€åŒ–å’Œå°ºå¯¸è°ƒæ•´ï¼Œä»¥é€‚åº”æ¨¡å‹çš„è¾“å…¥è¦æ±‚ã€‚
4. **æ¨¡å‹å±æ€§è®¾ç½®**ï¼š`set_model_attributes` æ–¹æ³•å°†æ•°æ®é›†çš„ç±»åˆ«ä¿¡æ¯é™„åŠ åˆ°æ¨¡å‹ä¸­ï¼Œä»¥ä¾¿äºåç»­çš„è®­ç»ƒå’Œæ¨ç†ã€‚
5. **æ¨¡å‹è·å–**ï¼š`get_model` æ–¹æ³•åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œå¯ä»¥é€‰æ‹©æ€§åœ°åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„è„šæœ¬ï¼ŒåŸºäº Ultralytics çš„å®ç°ã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªåä¸º `DetectionTrainer` çš„ç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ª `BaseTrainer`ï¼Œå¹¶ä¸“é—¨ç”¨äºå¤„ç†ç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚

åœ¨è¿™ä¸ªç±»ä¸­ï¼Œé¦–å…ˆå®šä¹‰äº† `build_dataset` æ–¹æ³•ï¼Œç”¨äºæ„å»º YOLO æ•°æ®é›†ã€‚è¯¥æ–¹æ³•æ¥æ”¶å›¾åƒè·¯å¾„ã€æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰å’Œæ‰¹æ¬¡å¤§å°ä½œä¸ºå‚æ•°ã€‚å®ƒé€šè¿‡è°ƒç”¨ `build_yolo_dataset` å‡½æ•°æ¥ç”Ÿæˆæ•°æ®é›†ï¼Œå¹¶æ ¹æ®æ¨¡å‹çš„æ­¥å¹…è®¾ç½®åˆé€‚çš„å‚æ•°ã€‚

æ¥ä¸‹æ¥ï¼Œ`get_dataloader` æ–¹æ³•ç”¨äºæ„å»ºæ•°æ®åŠ è½½å™¨ã€‚å®ƒæ ¹æ®ä¼ å…¥çš„æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰æ¥åˆå§‹åŒ–æ•°æ®é›†ï¼Œå¹¶è®¾ç½®æ˜¯å¦æ‰“ä¹±æ•°æ®çš„é¡ºåºã€‚è¿™ä¸ªæ–¹æ³•è¿˜ä¼šæ ¹æ®è®­ç»ƒæ¨¡å¼è°ƒæ•´å·¥ä½œçº¿ç¨‹çš„æ•°é‡ã€‚

`preprocess_batch` æ–¹æ³•ç”¨äºå¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°†å›¾åƒç¼©æ”¾åˆ°åˆé€‚çš„å¤§å°å¹¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°æ ¼å¼ã€‚è¿™ä¸ªè¿‡ç¨‹è¿˜æ”¯æŒå¤šå°ºåº¦è®­ç»ƒï¼Œå³éšæœºé€‰æ‹©å›¾åƒçš„å¤§å°è¿›è¡Œè®­ç»ƒï¼Œä»¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ç­‰ã€‚å®ƒç¡®ä¿æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«æ•°æ®é›†ä¸­å®šä¹‰çš„ç±»åˆ«ã€‚

`get_model` æ–¹æ³•è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹çš„å®ä¾‹ï¼Œå¹¶å¯é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯æ¨¡å‹åˆå§‹åŒ–çš„å…³é”®éƒ¨åˆ†ã€‚

`get_validator` æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºéªŒè¯æ¨¡å‹æ€§èƒ½çš„éªŒè¯å™¨å®ä¾‹ï¼Œä¾¿äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¯„ä¼°æ¨¡å‹çš„æ•ˆæœã€‚

`label_loss_items` æ–¹æ³•ç”¨äºè¿”å›ä¸€ä¸ªåŒ…å«è®­ç»ƒæŸå¤±é¡¹çš„å­—å…¸ï¼Œæ–¹ä¾¿åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç›‘æ§æ¨¡å‹çš„è¡¨ç°ã€‚

`progress_string` æ–¹æ³•ç”Ÿæˆä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œç”¨äºæ˜¾ç¤ºè®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„ epochã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ç­‰ä¿¡æ¯ã€‚

`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œä¾¿äºå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•°æ®ã€‚

æœ€åï¼Œ`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œæ ‡ç­¾ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£æ¨¡å‹çš„è®­ç»ƒæ•ˆæœå’Œæ•°æ®åˆ†å¸ƒã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„è®­ç»ƒæ¡†æ¶ï¼Œæ¶µç›–äº†æ•°æ®åŠ è½½ã€é¢„å¤„ç†ã€æ¨¡å‹è®­ç»ƒã€éªŒè¯å’Œå¯è§†åŒ–ç­‰å¤šä¸ªæ–¹é¢ï¼Œé€‚åˆç”¨äºç›®æ ‡æ£€æµ‹ä»»åŠ¡çš„æ·±åº¦å­¦ä¹ ç ”ç©¶å’Œåº”ç”¨ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºYOLOv8çš„ç›®æ ‡æ£€æµ‹æ¡†æ¶ï¼Œæ—¨åœ¨æä¾›é«˜æ•ˆçš„æ¨¡å‹è®­ç»ƒã€éªŒè¯å’Œæ¨ç†åŠŸèƒ½ã€‚å®ƒçš„æ¶æ„ç”±å¤šä¸ªæ¨¡å—ç»„æˆï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®å¤„ç†ã€æ¨¡å‹è®­ç»ƒã€å›è°ƒç®¡ç†ã€å¯è§†åŒ–ç­‰ã€‚æ•´ä½“ä¸Šï¼Œé¡¹ç›®é€šè¿‡å°è£…å¤æ‚çš„è®­ç»ƒè¿‡ç¨‹ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿæ–¹ä¾¿åœ°è¿›è¡Œæ¨¡å‹çš„è®­ç»ƒå’Œè°ƒè¯•ï¼ŒåŒæ—¶æ”¯æŒå¤šç§YOLOç®—æ³•çš„æ”¹è¿›å’Œæ‰©å±•ã€‚

ä¸»è¦åŠŸèƒ½æ¨¡å—åŒ…æ‹¬ï¼š

1. **æ•°æ®å¤„ç†**ï¼šè´Ÿè´£åŠ è½½å’Œé¢„å¤„ç†è®­ç»ƒå’ŒéªŒè¯æ•°æ®é›†ã€‚
2. **æ¨¡å‹è®­ç»ƒ**ï¼šå®ç°è®­ç»ƒè¿‡ç¨‹çš„ç®¡ç†ï¼ŒåŒ…æ‹¬æŸå¤±è®¡ç®—ã€æ¨¡å‹ä¿å­˜å’ŒéªŒè¯ã€‚
3. **å›è°ƒå‡½æ•°**ï¼šç”¨äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ‰§è¡Œç‰¹å®šæ“ä½œï¼Œå¦‚è®°å½•æ—¥å¿—ã€ä¸Šä¼ æ¨¡å‹ç­‰ã€‚
4. **å¯è§†åŒ–**ï¼šæä¾›è®­ç»ƒè¿‡ç¨‹ä¸­çš„å¯è§†åŒ–åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£æ¨¡å‹æ€§èƒ½å’Œæ•°æ®åˆ†å¸ƒã€‚
5. **ç”¨æˆ·ç•Œé¢**ï¼šæ”¯æŒé€šè¿‡å‘½ä»¤è¡Œæˆ–å›¾å½¢ç•Œé¢è¿è¡Œè®­ç»ƒè„šæœ¬ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                                 | åŠŸèƒ½æè¿°                                                       |
|------------------------------------------------------------------------|--------------------------------------------------------------|
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\dvc.py` | é›†æˆDVCLiveå·¥å…·ï¼Œè®°å½•å’Œå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¿¡æ¯ã€‚                     |
| `code\ultralytics\utils\patches.py`                                   | å¢å¼ºOpenCVå’ŒPyTorchåŠŸèƒ½ï¼Œæä¾›å›¾åƒè¯»å–ã€å†™å…¥å’Œä¿å­˜æ¨¡å‹çš„åŠŸèƒ½ã€‚         |
| `ui.py`                                                                | è¿è¡ŒæŒ‡å®šçš„Pythonè„šæœ¬ï¼ˆå¦‚`web.py`ï¼‰ï¼Œæä¾›å‘½ä»¤è¡Œç•Œé¢ã€‚                 |
| `code\ultralytics\data\build.py`                                      | æ„å»ºYOLOæ•°æ®é›†å’Œæ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒæ— é™å¾ªç¯çš„æ•°æ®åŠ è½½ã€‚                   |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\hub.py` | ä¸Ultralytics HUBäº¤äº’ï¼Œä¸Šä¼ æ¨¡å‹å’Œè®­ç»ƒè¿›åº¦çš„æŒ‡æ ‡ã€‚                     |
| `train.py`                                                            | å®šä¹‰YOLOæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®åŠ è½½ã€é¢„å¤„ç†ã€æ¨¡å‹è®­ç»ƒå’ŒéªŒè¯ã€‚        |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\engine\trainer.py` | ç®¡ç†è®­ç»ƒè¿‡ç¨‹çš„æ ¸å¿ƒé€»è¾‘ï¼ŒåŒ…æ‹¬è®­ç»ƒå¾ªç¯å’ŒæŸå¤±è®¡ç®—ã€‚                     |
| `code\ultralytics\models\yolo\obb\val.py`                             | å¤„ç†YOLOæ¨¡å‹çš„éªŒè¯è¿‡ç¨‹ï¼Œè¯„ä¼°æ¨¡å‹æ€§èƒ½ã€‚                             |
| `code\web.py`                                                         | æä¾›Webç•Œé¢ï¼Œæ”¯æŒä¸è®­ç»ƒè¿‡ç¨‹çš„äº¤äº’å’Œå¯è§†åŒ–ã€‚                         |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\engine\results.py` | å¤„ç†æ¨¡å‹æ¨ç†ç»“æœï¼Œæä¾›ç»“æœçš„å¯è§†åŒ–å’Œåˆ†æåŠŸèƒ½ã€‚                       |
| `code\ultralytics\utils\instance.py`                                  | æä¾›å®ä¾‹åŒ–å·¥å…·ï¼Œæ”¯æŒæ¨¡å‹å’Œæ•°æ®é›†çš„åˆ›å»ºå’Œç®¡ç†ã€‚                       |
| `code\ultralytics\cfg\__init__.py`                                    | é…ç½®æ–‡ä»¶ç®¡ç†ï¼Œå®šä¹‰æ¨¡å‹å’Œè®­ç»ƒå‚æ•°çš„é»˜è®¤è®¾ç½®ã€‚                         |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\checks.py` | æ£€æŸ¥ç¯å¢ƒå’Œä¾èµ–ï¼Œç¡®ä¿è®­ç»ƒè¿‡ç¨‹ä¸­çš„å¿…è¦æ¡ä»¶æ»¡è¶³ã€‚                       |

è¿™ä¸ªè¡¨æ ¼æ¦‚è¿°äº†æ¯ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿç†è§£é¡¹ç›®çš„ç»“æ„å’Œå„ä¸ªæ¨¡å—çš„ä½œç”¨ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuWl5dx](https://mbd.pub/o/bread/ZpuWl5dx)